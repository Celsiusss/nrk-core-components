{"version":3,"file":"core-components.min.js","sources":["../packages/utils.js","../packages/core-expand/node_modules/polyfill-custom-event/index.js","../packages/core-expand/core-expand.js","../packages/core-expand/core-expand.jsx","../packages/core-input/core-input.js","../packages/core-input/core-input.jsx"],"sourcesContent":["const KEY = `core-components-${Date.now()}`\nconst STATES = {}\nlet UUID = 0\n\nexport function assign (target, ...sources) {\n  sources.filter(Boolean).forEach((source) => {\n    Object.keys(source).forEach((key) => (target[key] = source[key]))\n  })\n  return target\n}\n\nexport function attr (elements, attributes) {\n  getElements(elements).forEach((element) => {\n    Object.keys(attributes).forEach((name) => {\n      element[`${attributes[name] === null ? 'remove' : 'set'}Attribute`](name, attributes[name])\n    })\n  })\n  return elements\n}\n\nexport const closest = (element, nodeName) => {\n  for (var el = element; el; el = el.parentElement) {\n    if (el.nodeName.toLowerCase() === nodeName) return el\n  }\n}\n\nexport function getElements (elements) {\n  if (typeof elements === 'string') return getElements(document.querySelectorAll(elements))\n  if (elements && elements.length) return [].slice.call(elements)\n  if (elements && elements.nodeType) return [elements]\n  return []\n}\n\nexport function weakState (element, object, initial = {}) {\n  const uuid = element[KEY] || (element[KEY] = ++UUID)\n  const state = STATES[uuid] || (STATES[uuid] = initial)\n\n  if (object === false) {\n    delete element[KEY]\n    delete STATES[uuid]\n  } else if (typeof object === 'object') {\n    Object.keys(state).forEach((key) => (state[key] = object[key]))\n  }\n\n  return state\n}\n","let polyfilled = false;\n\nif(typeof window !==\"undefined\" && typeof window.CustomEvent !== \"function\") {\n\n\tfunction CustomEvent ( event, params = { bubbles: false, cancelable: false, detail: undefined } ) {\n    \tvar evt = document.createEvent( 'CustomEvent' );\n    \tevt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n    \treturn evt;\n\t}\n\n\tCustomEvent.prototype = window.Event.prototype;\n\n\twindow.CustomEvent = CustomEvent;\n\n\tpolyfilled = true;\n\n};\n\nexport default polyfilled;\n","import {name, version} from './package.json'\nimport {getElements} from '../utils'\nimport 'polyfill-custom-event'\n\nconst KEY = `${name}-${version}`\n\nexport function expand (...args) {\n  return new Expand(...args)\n}\n\nclass Expand {\n  constructor (elements) {\n    this.elements = getElements(elements)\n    this.elements.forEach((el) => (el[KEY] = 1))   // Register polyfill\n  }\n  open (open = true) { this.toggle(open) }\n  close (open = false) { this.toggle(open) }\n  toggle (open) {\n    const type = typeof open\n\n    this.elements.forEach((element, index) => {\n      // const shouldExpand = type === 'function' ? open(element, index) : (type === 'undefined' ? el.getAttribute('aria-expanded') === 'false') : open\n      const toggleEvent = new window.CustomEvent('toggle', {bubbles: true, cancelable: true})\n      el.dispatchEvent(toggleEvent)\n\n      // Only toggle if not event.preventDefault()\n      // toggleEvent.defaultPrevented || el.setAttribute('aria-expanded', Boolean(shouldExpand))\n    })\n  }\n}\n\n// Click to toggle (only bind if unbound)\nif (typeof window !== 'undefined' && !window[KEY] && (window[KEY] = 1)) {\n  document.addEventListener('click', function (event) {\n    for (let el = event.target; el; el = el.parentElement) {\n      if (el[KEY]) expand(el).toggle()  // Only handle polyfilled elements\n    }\n  })\n}\n","import React from 'react'\nimport {expand as ref} from './core-expand'\nimport {assign} from '../utils'\n\nexport function Expand (props) {\n  const isExpanded = props.open !== 'false' && Boolean(props.open)\n  const attr = assign({\n    'className': 'nrk-expand',\n    'aria-expanded': isExpanded,\n    ref\n  }, props)\n\n  return <button {...attr} />\n}\n","import {attr} from '../utils'\n\nconst KEY = 'input-@VERSION'\nlet LIST // Element to contain list\nlet LIVE // Element to contain screen reader text\n\nfunction render (elem) {\n  const state = elem[KEY]\n  const value = state.value.trim().toLowerCase()\n  state.hits = state.items.filter((item) => item.value.toLowerCase().indexOf(value) !== -1)\n\n  attr(LIVE, {'aria-hidden': false})\n  attr(LIST, {'hidden': state.hits.length ? null : true})\n  attr(elem, {'aria-expanded': Boolean(state.hits.length)})\n\n  LIST.style.width = `${elem.offsetWidth}px`\n  LIST.innerHTML = state.hits.map(({value}, i) =>\n    `<li role=\"option\" aria-selected=\"${i === state.index}\">${value}</li>`\n  ).join('')\n}\n\nfunction onFocus (event) {\n  const elem = event.target\n  const controls = elem.getAttribute(`data-${KEY}`)\n\n  if (controls && !elem[KEY]) {\n    const mode = elem.getAttribute(`data-${KEY}-mode`) || 'suggestions'\n    const items = [].map.call(document.querySelectorAll(`#${controls} > *`), ({value}) => ({value}))\n    const parent = elem.parentElement\n\n    attr(elem, {\n      'role': 'combobox',\n      'autocomplete': 'off',\n      'aria-controls': `${KEY}-${controls}`,\n      'aria-autocomplete': 'list',\n      'aria-haspopup': true,\n      'aria-expanded': false\n    })\n\n    parent.className = parent.className.split(' ').concat(KEY).join(' ')\n    elem[KEY] = {items, mode, list: elem.nextElementSibling} // TODO: list\n  }\n\n  if (controls) {\n    LIST.id = `${KEY}-${controls}`\n    elem.insertAdjacentElement('afterend', LIST)\n    onInput(event)\n  }\n}\n\nfunction onBlur ({target}) {\n  if (target[KEY]) {\n    attr(LIST, 'hidden', 'hidden')\n    attr(LIVE, {'aria-hidden': 'true', 'aria-live': 'polite'})\n  }\n}\n\nfunction onInput (event) {\n  const elem = event.target\n  const state = elem[KEY]\n\n  if (state) {\n    state.index = -1\n    state.value = elem.value\n    render(elem)\n    LIVE.textContent = `${state.hits.length} treff`\n  }\n}\n\nfunction onKey (event) {\n  if (event.target[KEY]) {\n    const elem = event.target\n    const state = elem[KEY]\n    if (event.keyCode === 27) onBlur(event)\n    if (event.keyCode === 38 || event.keyCode === 40) {\n      event.preventDefault()\n      const hits = [].slice.call(LIST.children)\n      const selected = hits.filter((el) => el.getAttribute('aria-selected') === 'true')[0]\n      state.index = (hits.indexOf(selected) + (event.keyCode === 38 ? -1 : 1)) % hits.length\n      LIVE.setAttribute('aria-live', 'assertive')\n\n      render(event.target)\n      const value = (state.hits[state.index] || state).value\n      if (state.mode === 'results') {\n        LIVE.textContent = value || 'Tomt tekstfelt'\n      } else {\n        elem.value = value\n      }\n    }\n  }\n}\n\nif (typeof document !== 'undefined') {\n  attr(LIST = document.createElement('ul'), {role: 'listbox'})\n  attr(LIVE = document.createElement('span'), {'aria-hidden': 'true', 'aria-live': 'polite'})\n\n  // document.head.insertAdjacentElement('afterbegin', `<style>\n  //   .core-input { background: none }\n  // </style>`)\n\n  // document.addEventListener('keydown', onKey)\n  // document.addEventListener('input', onInput)\n  // document.addEventListener('focus', onFocus, true) // Use capture to ensure event bubling\n  // document.addEventListener('blur', onBlur, true)   // Use capture to ensure event bubling\n  // document.documentElement.appendChild(LIVE)\n}\n\nexport function input () {\n  console.log('input')\n}\n","export function Input () {\n  return <div>Testing input</div>\n}\n"],"names":["const","name","version","let","Expand","attr","ref","React"],"mappings":"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"}