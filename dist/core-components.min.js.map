{"version":3,"file":"core-components.min.js","sources":["../src/utils.js","../src/details.js","../src/details.jsx","../src/input.js","../src/input.jsx","../src/dialog.js","../src/core-components.js"],"sourcesContent":["const KEY = `core-components-${Date.now()}`\nconst STATES = {}\nlet UUID = 0\n\nexport function dispatchEvent (element, eventName, options) {\n  console.warn('TODO: polyfill customEvent')\n}\n\nexport function assign (target, ...sources) {\n  sources.filter(Boolean).forEach((source) => {\n    Object.keys(source).forEach((key) => (target[key] = source[key]))\n  })\n  return target\n}\n\nexport function attr (elements, attributes) {\n  getElements(elements).forEach((element) => {\n    Object.keys(attributes).forEach((name) => {\n      element[`${attributes[name] === null ? 'remove' : 'set'}Attribute`](name, attributes[name])\n    })\n  })\n  return elements\n}\n\nexport const closest = (element, nodeName) => {\n  for (var el = element; el; el = el.parentElement) {\n    if (el.nodeName.toLowerCase() === nodeName) return el\n  }\n}\n\nexport function getElements (elements) {\n  if (typeof elements === 'string') return getElements(document.querySelectorAll(elements))\n  if (elements && elements.length) return [].slice.call(elements)\n  if (elements && elements.nodeType) return [elements]\n  return []\n}\n\nexport function weakState (element, object, initial = {}) {\n  const weakMap = {\n    get: (element) => STATES[element[KEY]],\n    set: (element, object) => {\n      const uuid = element[KEY] || (element[KEY] = ++UUID)\n      const state = STATES[uuid] || (STATES[uuid] = initial)\n      Object.keys(object).forEach((key) => (state[key] = object[key]))\n      return state\n    },\n    has: (element) => Boolean(STATES[element[KEY]]),\n    delete: (element) => {\n      if (!weakMap.get(element)) return false\n      delete element[KEY]\n      delete STATES[element[KEY]]\n      return true\n    }\n  }\n\n  if (object === false) {\n    weakMap.delete(element)\n  } else if (typeof object === 'object') {\n    weakMap.set(element, object)\n  }\n\n  return weakMap\n}\n\nexport const queryAll = (selector, context = document) =>\n  [].slice.call(context.querySelectorAll(selector))\n","import {attr, closest, dispatchEvent, getElements} from './utils'\n\nconst KEY = 'details-@VERSION'\nconst DETAILS = 'detail'\nconst SUMMARY = 'summar'\nconst ENTER_KEY = 13\nconst SPACE_KEY = 32\n\nexport function details (elements) {\n  if(!(this instanceof details)) return new details(elements) //eslint-disable-line\n  this.elements = getElements(elements)\n  this.elements.forEach((details) => toggle(details, details.hasAttribute('open')))\n}\n\ndetails.prototype.open = function (fn = true) {\n  this.elements.forEach((el, i) => toggle(el, fn, i))\n  return this\n}\ndetails.prototype.close = function (fn = true) {\n  this.elements.forEach((el, i) => toggle(el, !fn, i))\n  return this\n}\n\nfunction toggle (details, fn, index) {\n  const isOpen = Boolean(typeof fn === 'function' ? fn(details, index) : fn)\n  const slient = details.open === isOpen || 'ontoggle' in details\n\n  details[KEY] = true                           // Register polyfill\n  attr(details.querySelectorAll(SUMMARY), {\n    tabindex: 0,\n    role: 'button',\n    'aria-expanded': isOpen\n  })\n\n  // console.log(details.open, isOpen, details.hasAttribute('open'))\n  if (isOpen !== details.open) details.open = isOpen\n  if (isOpen !== details.hasAttribute('open')) attr(details, {open: isOpen || null})\n\n  slient || dispatchEvent(details, 'toggle')\n}\n\nfunction onKey (event) {\n  if (event.keyCode === ENTER_KEY || event.keyCode === SPACE_KEY) onClick(event)\n}\n\nfunction onClick (event) {\n  const summary = closest(event.target, SUMMARY)\n  const details = closest(event.target, DETAILS)\n\n  if (summary && details && KEY in details) {               // Only handle polyfilled elements\n    if (event.keyCode === SPACE_KEY) event.preventDefault() // Prevent scroll\n    toggle(details, !details.open)\n  }\n}\n\n// Make sure we are in a browser and have not already loaded the component\nif (typeof document !== 'undefined' && !document.getElementById(KEY)) {\n  document.createElement(DETAILS)                           // Shim <details> for IE and\n  document.createElement(SUMMARY)                           // Shim <summary> for IE\n  document.addEventListener('click', onClick)               // Polyfill click to toggle\n  document.addEventListener('keydown', onKey)               // Make <summary role=\"button\"> behave like <button>\n  document.head.insertAdjacentHTML('afterbegin',            // Insert css in top for easy overwriting\n    `<style id=\"${KEY}\">\n      ${SUMMARY}{display:block;cursor:pointer;touch-action:manipulation}\n      ${SUMMARY}::-webkit-details-marker{display:none}\n      ${SUMMARY}::before{content:'';padding-right:1em;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10 10'%3E%3Cpath d='M0 0h10L5 10'/%3E%3C/svg%3E\") 0 45%/50% no-repeat}\n      ${SUMMARY}[aria-expanded=\"false\"]::before{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10 10'%3E%3Cpath d='M0 0l10 5-10 5'/%3E%3C/svg%3E\")}\n      ${SUMMARY}[aria-expanded=\"false\"]~*{display:none}\n    </style>`)\n}\n","import {assign} from './utils'\nimport './details'              // Load polyfill\n\nexport function Details (props) {\n  const isOpen = props.open !== 'false' && Boolean(props.open)\n  const aria = {role: 'button', tabIndex: 0, 'aria-expanded': String(isOpen)}\n  let children = props.children\n\n  // Loop though children and augment <summary> with aria attributes\n  if (Array.isArray(children)) {\n    children = children.map((child, key) => {\n      const attr = assign({ref: child.ref, key}, child.props, child.type === 'summary' ? aria : {})\n      return child.type ? <child.type {...attr} /> : <div key={key}>{child}</div>\n    })\n  }\n\n  return <details {...props} open={isOpen}>{children}</details>\n}\n","import {attr} from './utils'\n\nconst KEY = 'input-@VERSION'\nlet LIST // Element to contain list\nlet LIVE // Element to contain screen reader text\n\nfunction render (elem) {\n  const state = elem[KEY]\n  const value = state.value.trim().toLowerCase()\n  state.hits = state.items.filter((item) => item.value.toLowerCase().indexOf(value) !== -1)\n\n  attr(LIVE, {'aria-hidden': false})\n  attr(LIST, {'hidden': state.hits.length ? null : true})\n  attr(elem, {'aria-expanded': Boolean(state.hits.length)})\n\n  LIST.style.width = `${elem.offsetWidth}px`\n  LIST.innerHTML = state.hits.map(({value}, i) =>\n    `<li role=\"option\" aria-selected=\"${i === state.index}\">${value}</li>`\n  ).join('')\n}\n\nfunction onFocus (event) {\n  const elem = event.target\n  const controls = elem.getAttribute(`data-${KEY}`)\n\n  if (controls && !elem[KEY]) {\n    const mode = elem.getAttribute(`data-${KEY}-mode`) || 'suggestions'\n    const items = [].map.call(document.querySelectorAll(`#${controls} > *`), ({value}) => ({value}))\n    const parent = elem.parentElement\n\n    attr(elem, {\n      'role': 'combobox',\n      'autocomplete': 'off',\n      'aria-controls': `${KEY}-${controls}`,\n      'aria-autocomplete': 'list',\n      'aria-haspopup': true,\n      'aria-expanded': false\n    })\n\n    parent.className = parent.className.split(' ').concat(KEY).join(' ')\n    elem[KEY] = {items, mode, list: elem.nextElementSibling} // TODO: list\n  }\n\n  if (controls) {\n    LIST.id = `${KEY}-${controls}`\n    elem.insertAdjacentElement('afterend', LIST)\n    onInput(event)\n  }\n}\n\nfunction onBlur ({target}) {\n  if (target[KEY]) {\n    attr(LIST, 'hidden', 'hidden')\n    attr(LIVE, {'aria-hidden': 'true', 'aria-live': 'polite'})\n  }\n}\n\nfunction onInput (event) {\n  const elem = event.target\n  const state = elem[KEY]\n\n  if (state) {\n    state.index = -1\n    state.value = elem.value\n    render(elem)\n    LIVE.textContent = `${state.hits.length} treff`\n  }\n}\n\nfunction onKey (event) {\n  if (event.target[KEY]) {\n    const elem = event.target\n    const state = elem[KEY]\n    if (event.keyCode === 27) onBlur(event)\n    if (event.keyCode === 38 || event.keyCode === 40) {\n      event.preventDefault()\n      const hits = [].slice.call(LIST.children)\n      const selected = hits.filter((el) => el.getAttribute('aria-selected') === 'true')[0]\n      state.index = (hits.indexOf(selected) + (event.keyCode === 38 ? -1 : 1)) % hits.length\n      LIVE.setAttribute('aria-live', 'assertive')\n\n      render(event.target)\n      const value = (state.hits[state.index] || state).value\n      if (state.mode === 'results') {\n        LIVE.textContent = value || 'Tomt tekstfelt'\n      } else {\n        elem.value = value\n      }\n    }\n  }\n}\n\nif (typeof document !== 'undefined') {\n  attr(LIST = document.createElement('ul'), {role: 'listbox'})\n  attr(LIVE = document.createElement('span'), {'aria-hidden': 'true', 'aria-live': 'polite'})\n\n  document.addEventListener('keydown', onKey)\n  document.addEventListener('input', onInput)\n  document.addEventListener('focus', onFocus, true) // Use capture to ensure event bubling\n  document.addEventListener('blur', onBlur, true)   // Use capture to ensure event bubling\n  document.documentElement.appendChild(LIVE)\n}\n\nexport function input () {\n  console.log('input')\n}\n","export function Input () {\n  return <div>Testing input</div>\n}\n","import {attr, getElements, weakState} from './utils'\n\nlet BACKDROP\nconst KEY = 'dialog-@VERSION'\nconst KEY_UNIVERSAL = 'data-dialog-xxx'\nconst FOCUSABLE_ELEMENTS = `\n  [tabindex]:not([disabled]),\n  button:not([disabled]),\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled])`\n\n// Attempt to focus on an autofocus target first. If none exists we will focus\n// on the first focusable element.\nconst focusOnFirstFocusableElement = (el) => {\n  const autofocusElement = el.querySelector('[autofocus]:not([disabled])')\n  const focusableElement = el.querySelector(FOCUSABLE_ELEMENTS)\n  ;(autofocusElement || focusableElement || el).focus()\n}\n\nconst getHighestZIndex = () =>\n  getElements('*').reduce((zIndex, el) =>\n    Math.max(zIndex, Number(window.getComputedStyle(el, null).getPropertyValue('z-index')) || 0)\n  , 0)\n\nconst getActive = () => document.querySelector(`[${KEY_UNIVERSAL}]`)\n\nconst setActiveStateForElement = (el) => {\n  const prevActive = getActive()\n  // attr(prevActive, {KEY_UNIVERSAL: null})\n  prevActive && prevActive.removeAttribute(KEY_UNIVERSAL)\n  el.setAttribute(KEY_UNIVERSAL, '')\n\n  return weakState(el, {\n    prevActive,\n    focusBeforeModalOpen: document.activeElement\n  }).get(el)\n}\n\n// Will toggle the open state of the dialog depending on what the fn function\n// returns or what (Boolean) value fn has.\nconst toggle = (el, index, fn, open = true) => {\n  const isOpen = Boolean(typeof fn === 'function' ? fn(el, index) : fn) === open\n\n  attr(el, {open: isOpen ? '' : null})\n\n  if (isOpen) {\n    el.style.zIndex = getHighestZIndex() + 1\n    setActiveStateForElement(el)\n    focusOnFirstFocusableElement(el)\n    BACKDROP.hidden = false\n    // set focus\n  } else {\n    BACKDROP.hidden = !(weakState().get(el).prevActive)\n    el.removeAttribute(KEY_UNIVERSAL)\n    if (!BACKDROP.hidden) {\n      weakState().get(el).prevActive.setAttribute(KEY_UNIVERSAL, '')\n    }\n    // Should be able to pop when removing as the last element is the active dialog\n    const state = weakState().get(el)\n    // Focus on the last focused thing before the dialog modal was opened\n    state.focusBeforeModalOpen && state.focusBeforeModalOpen.focus()\n    // Delete state for element\n    weakState(el, false)\n  }\n}\n\nconst keepFocus = (event) => {\n  const activeDialog = getActive()\n  // If no dialog is active, we don't need to do anything\n  if (!activeDialog) { return }\n\n  const state = weakState().get(activeDialog)\n  const focusable = activeDialog.querySelectorAll(FOCUSABLE_ELEMENTS)\n\n  // If focus moves us outside the dialog, we need to refocus to inside the dialog\n  if (!activeDialog.contains(event.target)) {\n    state.activeElement === focusable[0] ? focusable[focusable.length - 1].focus() : focusable[0].focus()\n  } else {\n    state.activeElement = event.target\n  }\n}\n\nconst exitOnEscape = (event) => {\n  if (event.keyCode === 27) dialog(getActive()).close()\n}\n\nexport function dialog (selector, options) {\n  if (!(this instanceof dialog)) return new dialog(selector, options) //eslint-disable-line\n\n  // Initialize the element with necessary attributes for a dialog\n  this.elements = attr(getElements(selector), {\n    role: 'dialog',\n    tabindex: -1,\n    'aria-modal': true\n  })\n\n  return this\n}\n\ndialog.prototype.open = function (fn = true) {\n  this.elements.forEach((el, index) => toggle(el, index, fn))\n  return this\n}\n\ndialog.prototype.close = function (fn = false) {\n  this.elements.forEach((el, index) => toggle(el, index, fn))\n  return this\n}\n\nexport function createBackdrop () {\n  attr(BACKDROP = document.createElement('div'), {hidden: true, id: KEY})\n  // @todo: General styling. Should be removed?\n  BACKDROP.classList.add('nrk-dialog-backdrop')\n  document.addEventListener('focus', keepFocus, true)\n  document.addEventListener('keydown', exitOnEscape)\n  document.documentElement.appendChild(BACKDROP)\n}\n\nif (typeof document !== 'undefined' && !document.getElementById(KEY)) {\n  createBackdrop()\n}\n","export const version = '@VERSION'\nexport {details} from './details'\nexport {Details} from './details.jsx'\nexport {input} from './input'\nexport {Input} from './input.jsx'\nexport {dialog} from './dialog'\n"],"names":["const","KEY","let","attr","onKey","toggle"],"mappings":"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"}