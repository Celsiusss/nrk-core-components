{"version":3,"file":"core-components.min.js","sources":["../packages/utils.js","../packages/core-expand/core-expand.js","../packages/core-datepicker/node_modules/polyfill-custom-event/index.js","../packages/core-datepicker/core-datepicker.js","../packages/core-expand/node_modules/polyfill-custom-event/index.js","../packages/core-expand/core-expand.jsx","../packages/core-input/core-input.js","../packages/core-datepicker/core-datepicker.jsx","../packages/core-input/core-input.jsx"],"sourcesContent":["const KEY = `core-components-${Date.now()}`\nconst STATES = {}\nlet UUID = 0\n\nexport function assign (target, ...sources) {\n  sources.filter(Boolean).forEach((source) => {\n    Object.keys(source).forEach((key) => (target[key] = source[key]))\n  })\n  return target\n}\n\nexport function attr (elements, attributes) {\n  getElements(elements).forEach((element) => {\n    Object.keys(attributes).forEach((name) => {\n      element[`${attributes[name] === null ? 'remove' : 'set'}Attribute`](name, attributes[name])\n    })\n  })\n  return elements\n}\n\nexport const closest = (element, nodeName) => {\n  for (var el = element; el; el = el.parentElement) {\n    if (el.nodeName.toLowerCase() === nodeName) return el\n  }\n}\n\nexport function on (key, event, handler) {\n  if (typeof window === 'undefined') return\n  const namespace = window[key] = window[key] || {}\n  const isUnbound = !namespace[event] && (namespace[event] = 1)\n\n  if (isUnbound) {\n    document.addEventListener(event, function (event) {\n      for (let el = event.target; el; el = el.parentElement) {\n        if (el[key]) handler(el, event)\n      }\n    }, true) // Use capture to make sure focus/blur bubbles in old Firefox\n  }\n}\n\nexport function getElements (elements, key) {\n  let list = []\n  if (typeof elements === 'string') list = [].slice.call(document.querySelectorAll(elements))\n  else if (elements && elements.length) list = [].slice.call(elements)\n  else if (elements && elements.nodeType) list = [elements]\n  if (key) list.forEach((el) => (el[key] = 1))\n  return list\n}\n\nexport function weakState (element, object, initial = {}) {\n  const uuid = element[KEY] || (element[KEY] = ++UUID)\n  const state = STATES[uuid] || (STATES[uuid] = initial)\n\n  if (object === false) {\n    delete element[KEY]\n    delete STATES[uuid]\n  } else if (typeof object === 'object') {\n    Object.keys(state).forEach((key) => (state[key] = object[key]))\n  }\n\n  return state\n}\n","import {name, version} from './package.json'\nimport {getElements, on} from '../utils'\nimport 'polyfill-custom-event'\n\nconst KEY = `${name}-${version}`                    // Unique id of component\n\nexport function expand (...args) {                  // Expose component\n  return new Expand(...args)\n}\n\nclass Expand {\n  constructor (elements) {\n    this.elements = getElements(elements, KEY)\n  }\n  open (open = true) {\n    this.toggle(open)\n  }\n  close (open = false) {\n    this.toggle(open)\n  }\n  toggle (open = null) {\n    this.elements.forEach((el, index) => {\n      const isExpanded = el.getAttribute('aria-expanded') !== 'false'\n      const willExpand = open === null ? isExpanded : (typeof open === 'function' ? open(el, index) : open)\n      const event = new window.CustomEvent('toggle', {bubbles: true, cancelable: true})\n\n      if (el.dispatchEvent(event)) el.setAttribute('aria-expanded', Boolean(willExpand)) // Expand if not preventDefault\n    })\n  }\n}\n\non(KEY, 'click', (el) => expand(el).toggle())\n","let polyfilled = false;\n\nif(typeof window !==\"undefined\" && typeof window.CustomEvent !== \"function\") {\n\n\tfunction CustomEvent ( event, params = { bubbles: false, cancelable: false, detail: undefined } ) {\n    \tvar evt = document.createEvent( 'CustomEvent' );\n    \tevt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n    \treturn evt;\n\t}\n\n\tCustomEvent.prototype = window.Event.prototype;\n\n\twindow.CustomEvent = CustomEvent;\n\n\tpolyfilled = true;\n\n};\n\nexport default polyfilled;\n","import {name, version} from './package.json'\nimport {getElements, on} from '../utils'\nimport 'polyfill-custom-event'\n\nconst KEY = `${name}-${version}`                    // Unique id of component\n\nexport function datepicker (...args) {              // Expose component\n  return new Datepicker(...args)\n}\n\nclass Datepicker {\n  constructor (elements) {\n    this.elements = getElements(elements, KEY)\n  }\n  open (open = true) {}\n  close (open = false) {}\n}\n\n\n/* <table>\n  <caption></caption>\n  <thead></thead>\n  <tbody></tbody>\n  <tfoot></tfoot>\n</table> */\n","let polyfilled = false;\n\nif(typeof window !==\"undefined\" && typeof window.CustomEvent !== \"function\") {\n\n\tfunction CustomEvent ( event, params = { bubbles: false, cancelable: false, detail: undefined } ) {\n    \tvar evt = document.createEvent( 'CustomEvent' );\n    \tevt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n    \treturn evt;\n\t}\n\n\tCustomEvent.prototype = window.Event.prototype;\n\n\twindow.CustomEvent = CustomEvent;\n\n\tpolyfilled = true;\n\n};\n\nexport default polyfilled;\n","import React from 'react'\nimport {expand as ref} from './core-expand'\nimport {assign} from '../utils'\n\nexport class Expand extends React.PureComponent {\n  constructor(props) {\n    super(props)\n    this.toggle = this.toggle.bind(this)\n    this.state = {\n      expanded: this.props.open !== 'false' && Boolean(this.props.open)\n    }\n  }\n  toggle() {\n    // this.setState((prevState, props) => ({\n    //   expanded: !prevState.expanded\n    // }))\n  }\n  render() {\n    const attr = assign({\n      'aria-expanded': this.state.expanded,\n      'onClick': this.toggleExpanded,\n      ref\n    }, this.props)\n\n    return <button {...attr} />\n  }\n}\n","import {attr} from '../utils'\n\nconst KEY = 'input-@VERSION'\nlet LIST // Element to contain list\nlet LIVE // Element to contain screen reader text\n\nfunction render (elem) {\n  const state = elem[KEY]\n  const value = state.value.trim().toLowerCase()\n  state.hits = state.items.filter((item) => item.value.toLowerCase().indexOf(value) !== -1)\n\n  attr(LIVE, {'aria-hidden': false})\n  attr(LIST, {'hidden': state.hits.length ? null : true})\n  attr(elem, {'aria-expanded': Boolean(state.hits.length)})\n\n  LIST.style.width = `${elem.offsetWidth}px`\n  LIST.innerHTML = state.hits.map(({value}, i) =>\n    `<li role=\"option\" aria-selected=\"${i === state.index}\">${value}</li>`\n  ).join('')\n}\n\nfunction onFocus (event) {\n  const elem = event.target\n  const controls = elem.getAttribute(`data-${KEY}`)\n\n  if (controls && !elem[KEY]) {\n    const mode = elem.getAttribute(`data-${KEY}-mode`) || 'suggestions'\n    const items = [].map.call(document.querySelectorAll(`#${controls} > *`), ({value}) => ({value}))\n    const parent = elem.parentElement\n\n    attr(elem, {\n      'role': 'combobox',\n      'autocomplete': 'off',\n      'aria-controls': `${KEY}-${controls}`,\n      'aria-autocomplete': 'list',\n      'aria-haspopup': true,\n      'aria-expanded': false\n    })\n\n    parent.className = parent.className.split(' ').concat(KEY).join(' ')\n    elem[KEY] = {items, mode, list: elem.nextElementSibling} // TODO: list\n  }\n\n  if (controls) {\n    LIST.id = `${KEY}-${controls}`\n    elem.insertAdjacentElement('afterend', LIST)\n    onInput(event)\n  }\n}\n\nfunction onBlur ({target}) {\n  if (target[KEY]) {\n    attr(LIST, 'hidden', 'hidden')\n    attr(LIVE, {'aria-hidden': 'true', 'aria-live': 'polite'})\n  }\n}\n\nfunction onInput (event) {\n  const elem = event.target\n  const state = elem[KEY]\n\n  if (state) {\n    state.index = -1\n    state.value = elem.value\n    render(elem)\n    LIVE.textContent = `${state.hits.length} treff`\n  }\n}\n\nfunction onKey (event) {\n  if (event.target[KEY]) {\n    const elem = event.target\n    const state = elem[KEY]\n    if (event.keyCode === 27) onBlur(event)\n    if (event.keyCode === 38 || event.keyCode === 40) {\n      event.preventDefault()\n      const hits = [].slice.call(LIST.children)\n      const selected = hits.filter((el) => el.getAttribute('aria-selected') === 'true')[0]\n      state.index = (hits.indexOf(selected) + (event.keyCode === 38 ? -1 : 1)) % hits.length\n      LIVE.setAttribute('aria-live', 'assertive')\n\n      render(event.target)\n      const value = (state.hits[state.index] || state).value\n      if (state.mode === 'results') {\n        LIVE.textContent = value || 'Tomt tekstfelt'\n      } else {\n        elem.value = value\n      }\n    }\n  }\n}\n\nif (typeof document !== 'undefined') {\n  attr(LIST = document.createElement('ul'), {role: 'listbox'})\n  attr(LIVE = document.createElement('span'), {'aria-hidden': 'true', 'aria-live': 'polite'})\n  // document.head.insertAdjacentElement('afterbegin', '<style>.core-input{background:none}</style>'')\n  // document.documentElement.appendChild(LIVE)\n\n  // on(KEY, 'keydown', onKey)\n  // on(KEY, 'input', onInput)\n  // on(KEY, 'focus', onFocus)\n  // on(KEY, 'blur', onBlur)\n}\n\nexport function input () {\n  console.log('input')\n}\n","export function Datepicker () {}\n","export function Input () {\n  return <div>Testing input</div>\n}\n"],"names":["attr","elements","attributes","getElements","forEach","element","Object","keys","name","key","let","list","slice","call","document","querySelectorAll","length","nodeType","el","expand","Expand","args","window","CustomEvent","event","params","bubbles","cancelable","detail","undefined","evt","createEvent","initCustomEvent","prototype","Event","const","Datepicker","this","open","close","KEY","toggle","index","isExpanded","getAttribute","willExpand","dispatchEvent","setAttribute","Boolean","handler","namespace","addEventListener","target","parentElement","on","props","super","bind","state","expanded","render","sources","filter","source","assign","aria-expanded","onClick","toggleExpanded","ref","React","PureComponent","createElement","role","aria-hidden","aria-live","console","log"],"mappings":"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"}