var name="@nrk/core-toggle",version="1.0.0";function registerElements(e,t){return"string"==typeof t?registerElements(e,document.querySelectorAll(t)):t.length?[].map.call(t,function(t){return(t[e]=1)&&t}):t.nodeType?(t[e]=1)&&[t]:[]}function getUUID(e,t){var n="core-components-uuid";return n+"-"+(window[n]=(window[n]||0)+1)}function ariaConnect(e,t,n){return void 0===t&&(t=e.nextElementSibling),void 0===n&&(n="controls"),e.setAttribute("aria-"+n,t.id=t.id||getUUID()),t.setAttribute("aria-labelledby",e.id=e.id||getUUID()),t}function registerEvent(e,t,n){if("undefined"!=typeof window){var r=window[e]=window[e]||{};!r[t]&&(r[t]=1)&&document.addEventListener(t,function(t){for(var r=t.target;r;r=r.parentElement)r[e]&&n(r,t)},!0)}}var CustomEvent=function(){if("undefined"!=typeof window)return"function"==typeof window.CustomEvent?window.CustomEvent:(e.prototype=window.Event.prototype,e);function e(e,t){void 0===t&&(t={});var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),n}}();function dispatchEvent(e,t,n){return void 0===n&&(n={}),e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}))}var KEY=name+"-"+version;function ariaExpanded(e,t,n){e.setAttribute("aria-expanded",n),t[n?"removeAttribute":"setAttribute"]("hidden","")}function toggle(e,t){return void 0===t&&(t=null),registerElements(KEY,e).map(function(e){var n=ariaConnect(e),r="true"===e.getAttribute("aria-expanded"),i=null===t?r:Boolean(t);return ariaExpanded(e,n,r),ariaExpanded(e,n,r!==i&&dispatchEvent(e,"toggle")?i:r),e})}registerEvent(KEY,"click",function(e){toggle(e,"true"!==e.getAttribute("aria-expanded"))});var SPEAKER="undefined"!=typeof document&&document.createElement("span");function dropdown(e){return toggle(e).map(function(e){return e.setAttribute("aria-haspopup",!0),e})}SPEAKER&&(SPEAKER.setAttribute("aria-live","assertive"),document.documentElement.appendChild(SPEAKER));export default dropdown;
