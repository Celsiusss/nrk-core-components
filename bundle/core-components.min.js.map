{"version":3,"file":"core-components.min.js","sources":["../packages/utils.js","../packages/core-datepicker/node_modules/polyfill-custom-event/index.js","../packages/core-datepicker/core-datepicker.js","../packages/core-toggle/core-toggle.js","../packages/core-toggle/core-toggle.jsx","../packages/core-input/core-input.js","../packages/core-datepicker/core-datepicker.jsx","../packages/core-input/core-input.jsx"],"sourcesContent":["/**\n* addElements\n* @param {String} key\n* @param {String|NodeList|Array|Element} elements A CSS selector string, nodeList, element array, or single element\n* @return {Array} Array of elements\n*/\nexport function addElements (key, elements) {\n  if (typeof elements === 'string') return addElements(key, document.querySelectorAll(elements))\n  if (elements.length) return [].map.call(elements, (el) => (el[key] = 1) && el)\n  if (elements.nodeType) return (elements[key] = 1) && [elements]\n  return []\n}\n\n/**\n* addEvent\n* @param {String} key A namespace to ensure no double binding and only triggering on registered elements\n* @param {String} eventName A case-sensitive string representing the event type to listen for\n* @param {Function} listener The function which receives a notification\n*/\nexport function addEvent (key, eventName, listener) {\n  if (typeof window === 'undefined') return\n\n  // Store on window to make sure multiple instances is merged\n  const namespace = window[key] = window[key] || {}\n  const isUnbound = !namespace[eventName] && (namespace[eventName] = 1)\n\n  if (isUnbound) {\n    document.addEventListener(eventName, function (event) {\n      for (let el = event.target; el; el = el.parentElement) {\n        if (el[key]) listener(el, event)\n      }\n    }, true) // Use capture to make sure focus/blur bubbles in old Firefox\n  }\n}\n\n/**\n* assign\n* @param {Object} target The target object\n* @param {Object} sources The source object(s)\n* @return {Object} The target object\n*/\nexport function assign (target, ...sources) {\n  sources.filter(Boolean).forEach((source) => {\n    Object.keys(source).forEach((key) => (target[key] = source[key]))\n  })\n  return target\n}\n\n/**\n* CustomEvent\n* See {@link https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent}\n* @param {String} eventName A case-sensitive string representing the event type to create\n* @param {Object} params.detail Any data passed when initializing the event\n* @param {Boolean} params.cancelable A Boolean indicating whether the event is cancelable.\n* @param {Boolean} params.bubbles A Boolean indicating whether the event bubbles up through the DOM or not.\n* @return {CustomEvent} Creates a CustomEvent.\n*/\nexport const CustomEvent = (() => {\n  if (typeof window === 'undefined') return\n  if (window.CustomEvent) return window.CustomEvent\n\n  function CustomEvent (event, params = {}) {\n    const evt = document.createEvent('CustomEvent')\n    evt.initCustomEvent(event, Boolean(params.bubbles), Boolean(params.cancelable), params.detail)\n    return evt\n  }\n\n  CustomEvent.prototype = window.Event.prototype\n  return CustomEvent\n})()\n\n/**\n* debounce\n* @param {Function} callback The function to debounce\n* @param {Number} ms The number of milliseconds to delay\n* @return {Function} The new debounced function\n*/\nexport function debounce (callback, ms) {\n  let timer\n  return function (...args) {\n    const self = this\n    clearTimeout(timer)\n    timer = setTimeout(() => callback.apply(self, args), ms)\n  }\n}\n\n/**\n* escapeHTML\n* @param {String} str A string with potential html tokens\n* @return {String} Escaped HTML string according to OWASP recommendation\n*/\nconst ESCAPE_HTML_MAP = {'&': '&amp;', '<': '&lt;', '>': '&gt;', '\"': '&quot;', '/': '&#x2F;', '\\'': '&#x27;'}\nexport function escapeHTML (str) {\n  return String(str || '').replace(/[&<>\"'/]/g, (char) => ESCAPE_HTML_MAP[char])\n}\n","let polyfilled = false;\n\nif(typeof window !==\"undefined\" && typeof window.CustomEvent !== \"function\") {\n\n\tfunction CustomEvent ( event, params = { bubbles: false, cancelable: false, detail: undefined } ) {\n    \tvar evt = document.createEvent( 'CustomEvent' );\n    \tevt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n    \treturn evt;\n\t}\n\n\tCustomEvent.prototype = window.Event.prototype;\n\n\twindow.CustomEvent = CustomEvent;\n\n\tpolyfilled = true;\n\n};\n\nexport default polyfilled;\n","import {name, version} from './package.json'\nimport {addElements, addEvent} from '../utils'\nimport 'polyfill-custom-event'\n\nconst KEY = `${name}-${version}`                    // Unique id of component\n\nexport function datepicker (...args) {              // Expose component\n  return new Datepicker(...args)\n}\n\nclass Datepicker {\n  constructor (elements) {\n    this.elements = addElements(elements, KEY)\n    // tabindex=\"0\" på datepicker kun lytte til events på disse\n  }\n  open (open = true) {}\n  close (open = false) {}\n}\n\n\n/* <table>\n  <caption></caption>\n  <thead></thead>\n  <tbody></tbody>\n  <tfoot></tfoot>\n</table> */\n","import {name, version} from './package.json'\nimport {addElements, addEvent, CustomEvent} from '../utils'\n\nconst KEY = `${name}-${version}`                    // Unique id of component\nconst ATTR = 'aria-expanded'\n\n/**\n* toggle\n* @param {String|NodeList|Array|Element} elements A CSS selector string, nodeList, element array, or single element\n* @param {Boolean} [open] Optional open argument. True will open, false will close\n* @return {Array} Array of elements\n*/\nexport function toggle (elements, open) {\n  const action = typeof open\n\n  return addElements(KEY, elements).map((el, index) => {\n    const prevState = el.getAttribute(ATTR) === 'true'\n    const nextState = action === 'undefined' ? prevState : Boolean(action === 'function' ? open(el, index) : open)\n    const canUpdate = prevState === nextState || el.dispatchEvent(new CustomEvent('toggle', {\n      bubbles: true,\n      cancelable: true,\n      detail: nextState\n    }))\n\n    if (canUpdate) el.setAttribute(ATTR, Boolean(open))\n    return el\n  })\n}\n\naddEvent(KEY, 'click', (el) => {\n  toggle(el, el.getAttribute(ATTR) !== 'true')\n})\n","import React from 'react'\nimport {assign} from '../utils'\n\nexport class Toggle extends React.PureComponent {\n  constructor(props) {\n    super(props)\n    this.toggle = this.toggle.bind(this)\n    this.state = {open: this.props.open !== 'false' && Boolean(this.props.open)}\n  }\n  toggle() {\n    this.setState((prevState, props) => ({open: !prevState.open}))\n  }\n  render() {\n    const attr = assign({\n      'aria-expanded': this.state.open,\n      'onClick': this.toggle\n    }, this.props)\n\n    return <button {...attr} />\n  }\n}\n","import {name, version} from './package.json'\nimport {addElements, addEvent} from '../utils'\n\nconst KEY = `${name}-${version}`  // Unique id of component\nlet ARIA_OWNS_ID = 0              // Used for generating aria-owns ids\nlet ARIA_LIVE_EL                  // Element to contain screen reader text\n\n\n/*addElements(KEY, element)\naddEvent(KEY, 'mouseenter', (event) => {\n  event.target\n});\n\naddEvent(KEY, 'keydown', (event) => {\n  const openDialog = [];\n  const closeEvent = new CustomEvent('dialog.close', {bubbles: true, cancelable: true})\n  const shouldClose = openDialog.dispatchEvent(closeEvent);\n});\n\ndocument.addEventListener('dialog.close', (event) => {\n  event.target\n});\n\nStore()*/\n\nconst OPTIONS = {\n  items: 10,\n  onHits: () => {},\n  sort: (itemA, itemB) => 0,\n  item: (item, input) => (item.label || item.value).replace(input.regex, '<b>' + input.query + '</b>'),\n  filter: (item, input) => item.value.indexOf(input.query) !== -1,\n  value: (item) => ({value: item.value, label: 'Hei'}),\n  list: (query) => {\n    return ['gmail.com', 'hotmail.com'].map((provider) => {\n      return `${query}@${provider}`\n    })\n  }\n}\n\n// var regex = new RegExp(input.query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&'), 'gi')\n\n/*const input = new coreComponents.Input(element)\ninput.evaluate()\ninput.focus()\ninput.focusLine(3)\ninput.show()\ninput.hide()\n\ndocument.addEventListener('input.hits', (event) => {\n  event.target = coreInput\n  event.detail = {store}\n  ?.goToNextHit()\n})*/\n\nexport function input (...args) {\n  return new Input(...args)\n}\n\nclass Input {\n  constructor (elements, options = {}) {\n    this.elements = getElements(elements)\n    this.elements.forEach((el) => {\n      const mode = options.complete || el.getAttribute('aria-autocomplete') || 'both'\n      const owns = options.owns || el.getAttribute('aria-owns') || `${KEY}-${ARIA_OWNS_ID++}`\n\n      el.setAttribute('role', 'combobox')\n      el.setAttribute('autocomplete', false)\n      el.setAttribute('aria-expanded', false)\n      el.setAttribute('aria-autocomplete', mode) // both = suggest, list = hits\n      el.setAttribute('aria-owns', owns)\n\n      if (!getList(el)) { // TODO what about <dataset>\n        const list = document.createElement('ul')\n        list.id = owns\n        list.className = 'nrk-dropdown'\n        el.insertAdjacentElement('afterend', list)\n      }\n\n      el[KEY] = [].map.call(getList(el).children, (el) => el.innerHTML)\n      getList(el).setAttribute('hidden', '')\n      getList(el).setAttribute('role', 'listbox')\n    })\n  }\n  value () {\n\n  }\n  show () {\n    ARIA_LIVE_EL.setAttribute('aria-hidden', false)\n    this.elements.forEach((el) => {\n      el.setAttribute('aria-expanded', true)\n      getList(el).removeAttribute('hidden')\n      getList(el).style.width = `${el.offsetWidth}px`\n    })\n    return this\n  }\n  hide () {\n    ARIA_LIVE_EL.setAttribute('aria-hidden', true)\n    this.elements.forEach((el) => {\n      el.setAttribute('aria-expanded', false)\n      getList(el).setAttribute('hidden', '')\n    })\n    return this\n  }\n}\n\nfunction getList (el) {\n  return document.getElementById(el.getAttribute('aria-owns'))\n}\n\nfunction render (el) {\n  const value = el.value.trim().toLowerCase()\n  const index = 0\n  const list = getList(el)\n  // const hits = [].map.call(list.children, (el) => el.textContent).filter((item) => item.toLowerCase().indexOf(value) !== -1)\n  // console.log(value, list, hits)\n\n  ARIA_LIVE_EL.setAttribute('aria-hidden', false)\n  ARIA_LIVE_EL.textContent = `${hits.length} treff`\n\n  el.setAttribute('aria-expanded', true) // should be false if no hits?\n  // el.setAttribute('aria-activedescendant')\n  list.removeAttribute('hidden')\n  list.style.width = `${el.offsetWidth}px`\n  list.innerHTML = hits.map(({value}, i) => `<li role=\"option\" aria-selected=\"${i === index}\">${value}</li>`).join('')\n}\n\nfunction onKey (el, event) {\n  if (event.keyCode === 27) input(el).hide()\n  if (event.keyCode === 38 || event.keyCode === 40) {\n    event.preventDefault()\n    const items = [].slice.call(getList(el).children)\n    const selected = items.filter((el) => el.getAttribute('aria-selected') === 'true')[0]\n    const index = (items.indexOf(selected) + (event.keyCode === 38 ? -1 : 1)) % items.length\n    const mode = el.getAttribute('aria-autocomplete')\n    const value = (items[index] || el).value\n    console.log(index, value)\n\n    render(el)\n\n    if (mode === 'list') LIVE.textContent = value || 'Tomt tekstfelt'\n    else el.value = value\n  }\n}\n\nif (typeof document !== 'undefined') {\n  ARIA_LIVE_EL = document.createElement('span')\n  ARIA_LIVE_EL.setAttribute('aria-hidden', true)\n  ARIA_LIVE_EL.setAttribute('aria-live', 'assertive')\n  document.documentElement.appendChild(ARIA_LIVE_EL)\n}\n\naddEvent(KEY, 'keydown', onKey)\naddEvent(KEY, 'focus', render)\naddEvent(KEY, 'input', render)\naddEvent(KEY, 'blur', (el) => input(el).hide())\n","export function Datepicker () {}\n","export function Input () {\n  return <div>Testing input</div>\n}\n"],"names":["addElements","key","elements","document","querySelectorAll","length","map","call","el","nodeType","addEvent","eventName","listener","window","const","namespace","addEventListener","event","let","target","parentElement","CustomEvent","prototype","Event","params","evt","createEvent","initCustomEvent","Boolean","bubbles","cancelable","detail","undefined","Datepicker","this","name","open","close","KEY","ATTR","toggle","action","index","prevState","getAttribute","nextState","dispatchEvent","setAttribute","ARIA_LIVE_EL","Toggle","props","super","bind","state","setState","render","attr","sources","filter","forEach","source","Object","keys","assign","aria-expanded","onClick","React","PureComponent","ARIA_OWNS_ID","input","Input","args","options","getElements","mode","complete","owns","getList","list","createElement","id","className","insertAdjacentElement","children","innerHTML","getElementById","value","trim","toLowerCase","textContent","hits","removeAttribute","style","width","ref","i","join","show","hide","documentElement","appendChild","keyCode","preventDefault","items","slice","selected","indexOf","console","log","LIVE"],"mappings":"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"}