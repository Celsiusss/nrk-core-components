{"version":3,"file":"index.js","sources":["../../packages/utils.js","../../packages/core-toggle/core-toggle.js","../../packages/core-toggle/core-toggle.jsx","../../packages/core-input/core-input.jsx"],"sourcesContent":["const IS_ANDROID = typeof window !== 'undefined' && /(android)/i.test(window.navigator.userAgent) // Bad, but needed\nconst FOCUSABLE = 'a,button,input,select,textarea,iframe,[tabindex],[contenteditable=\"true\"]'\n\n/**\n* assign\n* @param {Object} target The target object\n* @param {Object} sources The source object(s)\n* @return {Object} The target object\n*/\nexport function assign (target, ...sources) {\n  sources.filter(Boolean).forEach((source) => {\n    Object.keys(source).forEach((key) => (target[key] = source[key]))\n  })\n  return target\n}\n\n/**\n* addEvent\n* @param {String} uuid An unique ID of the event to bind - ensurnes single instance\n* @param {String} type The type of event to bind\n* @param {Function} handler The function to call on event\n*/\nexport function addEvent (uuid, type, handler) {\n  if (typeof window === 'undefined' || window[`${uuid}-${type}`]) return        // Ensure single instance\n  document.addEventListener(type, handler, window[`${uuid}-${type}`] = true)    // Use capture for old Firefox\n}\n\nexport function ariaExpand (master, open) {\n  const relatedTarget = ariaTarget(master)\n  const prevState = master.getAttribute('aria-expanded') === 'true'\n  const wantState = typeof open === 'boolean' ? open : (open === 'toggle' ? !prevState : prevState)\n  const canUpdate = prevState === wantState || dispatchEvent(master, 'toggle', {relatedTarget, isOpen: prevState})\n  const nextState = canUpdate ? wantState : prevState\n\n  relatedTarget[nextState ? 'removeAttribute' : 'setAttribute']('hidden', '')   // Toggle hidden attribute\n  master.setAttribute('aria-expanded', nextState)                               // Set expand always\n  return nextState\n}\n\nexport function ariaTarget (master, relationType, targetElement) {\n  const targetId = master.getAttribute('aria-controls') || master.getAttribute('aria-owns') || master.getAttribute('list')\n  const target = targetElement || document.getElementById(targetId) || master.nextElementSibling\n  const label = IS_ANDROID ? 'data' : 'aria'   // Andriod has a bug and reads only label instead of content\n\n  if (!target) throw new Error(`missing nextElementSibling on ${master.outerHTML}`)\n  if (relationType) {\n    master.setAttribute(`aria-${relationType}`, target.id = target.id || getUUID())\n    target.setAttribute(`${label}-labelledby`, master.id = master.id || getUUID())\n  }\n  return target\n}\n\n/**\n* CustomEvent\n* See {@link https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent}\n* @param {String} eventName A case-sensitive string representing the event type to create\n* @param {Object} params.detail Any data passed when initializing the event\n* @param {Boolean} params.cancelable A Boolean indicating whether the event is cancelable.\n* @param {Boolean} params.bubbles A Boolean indicating whether the event bubbles up through the DOM or not.\n* @return {CustomEvent} Creates a CustomEvent.\n*/\nexport const CustomEvent = (() => {\n  if (typeof window === 'undefined') return\n  if (typeof window.CustomEvent === 'function') return window.CustomEvent\n\n  function CustomEvent (name, params = {}) {\n    const event = document.createEvent('CustomEvent')\n    event.initCustomEvent(name, Boolean(params.bubbles), Boolean(params.cancelable), params.detail)\n    return event\n  }\n\n  CustomEvent.prototype = window.Event.prototype\n  return CustomEvent\n})()\n\n/**\n* debounce\n* @param {Function} callback The function to debounce\n* @param {Number} ms The number of milliseconds to delay\n* @return {Function} The new debounced function\n*/\nexport function debounce (callback, ms) {\n  let timer\n  return function (...args) {\n    const self = this\n    clearTimeout(timer)\n    timer = setTimeout(() => callback.apply(self, args), ms)\n  }\n}\n\n/**\n* dispatchEvent\n* @param {Element} elem The target object\n* @param {String} name The source object(s)\n* @param {Object} detail Detail object (bubbles and cancelable defaults to true)\n* @return {Boolean} Whether the event was cance\n*/\nexport function dispatchEvent (elem, name, detail = {}) {\n  return elem.dispatchEvent(new CustomEvent(name, {\n    bubbles: true,\n    cancelable: true,\n    detail\n  }))\n}\n\n/**\n* getUUID\n* @return {String} A generated unique ID\n*/\nexport function getUUID (el, attr) {\n  return Date.now().toString(36) + Math.random().toString(36).slice(2, 5)\n}\n\n/**\n* isVisible\n* @param {Element} el A element to check visibility on\n* @return {Boolean} True of false based on visibility\n*/\nexport function isVisible (el) {\n  return el.offsetWidth && el.offsetHeight && window.getComputedStyle(el).getPropertyValue('visibility') !== 'hidden'\n}\n\n/**\n* queryAll\n* @param {String|NodeList|Array|Element} elements A CSS selector string, nodeList, element array, or single element\n* @return {Array} Array of elements\n*/\nexport function queryAll (elements, context = document) {\n  if (elements === ':focusable') return queryAll(FOCUSABLE, context).filter((el) => !el.disabled && isVisible(el))\n  if (typeof elements === 'string') return queryAll(context.querySelectorAll(elements))\n  if (elements.length) return [].slice.call(elements)\n  return elements.nodeType ? [elements] : []\n}\n","import {name, version} from './package.json'\nimport {addEvent, ariaExpand, ariaTarget, queryAll} from '../utils'\n\nconst UUID = `data-${name}-${version}`.replace(/\\W+/g, '-')         // Strip invalid attribute characters\nconst OPEN = 'aria-expanded'\nconst POPS = 'aria-haspopup'\n\nconst isBool = (val) => typeof val === 'boolean'\n\nexport default function toggle (selector, open) {\n  const options = typeof open === 'object' ? open : {open}\n  const buttons = queryAll(selector)\n\n  buttons.forEach((button) => {\n    const open = isBool(options.open) ? options.open : button.getAttribute(OPEN) === 'true'\n    const pops = isBool(options.popup) ? options.popup : button.getAttribute(POPS) === 'true'\n\n    button.setAttribute(UUID, '')\n    button.setAttribute(POPS, pops)\n\n    ariaTarget(button, 'controls')\n    ariaExpand(button, open)\n  })\n\n  return buttons\n}\n\naddEvent(UUID, 'click', ({target}) => {\n  queryAll(`[${UUID}]`).forEach((el) => {\n    const open = el.getAttribute(OPEN) === 'true'\n    const pops = el.getAttribute(POPS) === 'true'\n\n    if (el.contains(target)) toggle(el, !open)                  // Click on toggle\n    else if (pops) toggle(el, ariaTarget(el).contains(target))  // Click in target or outside\n  })\n})\n","import React from 'react'\nimport coreToggle from '../core-toggle/core-toggle'\nimport {assign} from '../utils'\n\nfunction mountToggle (self) {\n  coreToggle(ReactDOM.findDOMNode(self).firstElementChild)      // Button must be first child\n}\n\nexport default class Toggle extends React.Component {\n  componentDidMount() { mountToggle(this) }                     // Mount client side only to avoid rerender\n  componentDidUpdate () { mountToggle(this) }                   // Must mount also on update in case content changes\n  render () {\n    return <div {...assign({}, this.props, {open: null, popup: null})}>\n      {React.Children.map(this.props.children, (child, i) => {  // Augment children with aria-attributes\n        return assign({}, child, {\n          props: assign({}, child.props, i ?\n            {'hidden': !this.props.open} :\n            {\n              'aria-expanded': String(Boolean(this.props.open)),\n              'aria-haspopup': String(Boolean(this.props.popup))\n            }\n          )\n        })\n      })}\n    </div>\n  }\n}\n","import React from 'react'\n\nexport default function Input () {\n  return <div>Testing input</div>\n}\n"],"names":["const","coreToggle","this"],"mappings":"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"}