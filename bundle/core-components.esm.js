function addEvent(t,e,n){"undefined"==typeof window||window[t+"-"+e]||document.addEventListener(e,n,window[t+"-"+e]=!0)}function attr(t,e,n){if(3===arguments.length)t[null===n?"removeAttribute":"setAttribute"](e,n);else{if("string"==typeof e)return t.getAttribute(e);Object.keys(n).forEach(function(o){return attr(t,e,n[o])})}return t}var CustomEvent=function(){if("undefined"!=typeof window)return"function"==typeof window.CustomEvent?window.CustomEvent:(t.prototype=window.Event.prototype,t);function t(t,e){void 0===e&&(e={});var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,Boolean(e.bubbles),Boolean(e.cancelable),e.detail),n}}();function dispatchEvent(t,e,n){return void 0===n&&(n={}),t.dispatchEvent(new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}))}function getUUID(t,e){return Date.now().toString(36)+Math.random().toString(36).slice(2,5)}function queryAll(t,e){return void 0===e&&(e=document),"string"==typeof t?queryAll(e.querySelectorAll(t)):t.length?[].slice.call(t):t.nodeType?[t]:[]}function queryFocusable(t){return void 0===t&&(t=document),queryAll('\n    a,\n    button,\n    input,\n    select,\n    textarea,\n    iframe,\n    [tabindex]\n    [contenteditable="true"]\n  ',t).filter(function(t){return!t.disabled})}if("undefined"!=typeof window&&"function"!=typeof window.CustomEvent){function CustomEvent$1(t,e){void 0===e&&(e={bubbles:!1,cancelable:!1,detail:void 0});var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}CustomEvent$1.prototype=window.Event.prototype,window.CustomEvent=CustomEvent$1}var KEY="core-datepicker";function datepicker(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Datepicker,[null].concat(t)))}var Datepicker=function(t){this.elements=queryAll(t,KEY)};Datepicker.prototype.open=function(t){void 0===t&&(t=!0)},Datepicker.prototype.close=function(t){void 0===t&&(t=!1)};var version="1.0.0";function toggle(t,e){return void 0===e&&(e=null),queryAll(t).map(function(t){var n="true"===t.getAttribute("aria-expanded"),o=null===e?n:Boolean(e),i=n!==o&&dispatchEvent(t,"toggle")?o:n,r=t.nextElementSibling;return t.setAttribute(toggle.UUID,""),t.setAttribute("aria-expanded",i),t.setAttribute("aria-controls",r.id=r.id||getUUID()),r.setAttribute("aria-labelledby",t.id=t.id||getUUID()),r[i?"removeAttribute":"setAttribute"]("hidden",""),t})}toggle.UUID="data-toggle-"+version.replace(/\D/g,"-"),addEvent(toggle.UUID,"click",function(t){queryAll("["+toggle.UUID+"]").forEach(function(e){var n="true"===e.getAttribute("aria-expanded"),o="true"===e.getAttribute("aria-haspopup");e.contains(t.target)?toggle(e,!n):o&&n&&dispatchEvent(e,"toggle.outside")&&toggle(e,!1)})});var KEYS={ESC:27,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40};function dropdown(t,e){return toggle(t,e).map(function(t){return attr(t,"aria-haspopup","true")})}function onKey(t,e,n){var o,i=queryFocusable(n),r=i.indexOf(document.activeElement);(o=t.keyCode===KEYS.ESC?e:t.keyCode===KEYS.UP?i[r-1]||i.pop():t.keyCode===KEYS.DOWN?i[r+1]||i[0]:t.keyCode===KEYS.HOME||t.keyCode===KEYS.PAGEUP?i[0]:t.keyCode===KEYS.END||t.keyCode===KEYS.END?i.pop():i.filter(function(e){return e.textContent.toLowerCase()[0]===t.key})[0])&&(t.preventDefault(),toggle(e,o!==e),o.focus())}addEvent(toggle.UUID,"keydown",function(t){if(!(t.ctrlKey||t.altKey||t.metaKey))for(var e=t.target;e;e=e.parentElement){var n=document.getElementById(e.getAttribute("aria-labelledby"))||e;if(n.hasAttribute(toggle.UUID)&&"true"===n.getAttribute("aria-haspopup"))return onKey(t,n,n.nextElementSibling)}});var SPEAKER="undefined"!=typeof document&&document.createElement("span");function input(t,e){return toggle(t).map(function(t){maste.nextElementSibling;var n=e.mode||el.getAttribute("aria-autocomplete")||"list";t.setAttribute("role","combobox"),t.setAttribute("autocomplete",!1),t.setAttribute("aria-autocomplete",n)})}addEvent(toggle.UUID,"toggle",function(t){t.target.getAttribute("role")}),addEvent(toggle.UUID,"input",function(t){}),SPEAKER&&(SPEAKER.style.fontSize="0px",SPEAKER.setAttribute("aria-hidden",!0),SPEAKER.setAttribute("aria-live","assertive"),document.documentElement.appendChild(SPEAKER));export{datepicker,toggle,dropdown,input};
