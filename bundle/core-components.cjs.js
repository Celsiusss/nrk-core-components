"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var name="@nrk/core-toggle",version="1.0.0",IS_ANDROID="undefined"!=typeof window&&/(android)/i.test(window.navigator.userAgent),FOCUSABLE='a,button,input,select,textarea,iframe,[tabindex],[contenteditable="true"]';function addEvent(t,e,n){"undefined"==typeof window||window[t+"-"+e]||document.addEventListener(e,n,window[t+"-"+e]=!0)}function ariaExpand(t,e){var n=ariaTarget(t),o="true"===t.getAttribute("aria-expanded"),r="boolean"==typeof e?e:"toggle"===e?!o:o,i=o===r||dispatchEvent(t,"toggle",{relatedTarget:n,isOpen:o})?r:o;return n[i?"removeAttribute":"setAttribute"]("hidden",""),t.setAttribute("aria-expanded",i),i}function ariaTarget(t,e,n){var o=t.getAttribute("aria-controls")||t.getAttribute("aria-owns")||t.getAttribute("list"),r=n||document.getElementById(o)||t.nextElementSibling,i=IS_ANDROID?"data":"aria";if(!r)throw new Error("missing nextElementSibling on "+t.outerHTML);return e&&(t.setAttribute("aria-"+e,r.id=r.id||getUUID()),r.setAttribute(i+"-labelledby",t.id=t.id||getUUID())),r}var CustomEvent=function(){if("undefined"!=typeof window)return"function"==typeof window.CustomEvent?window.CustomEvent:(t.prototype=window.Event.prototype,t);function t(t,e){void 0===e&&(e={});var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,Boolean(e.bubbles),Boolean(e.cancelable),e.detail),n}}();function dispatchEvent(t,e,n){return void 0===n&&(n={}),t.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n}))}function getUUID(t,e){return Date.now().toString(36)+Math.random().toString(36).slice(2,5)}function isVisible(t){return t.offsetWidth&&t.offsetHeight&&"hidden"!==window.getComputedStyle(t).getPropertyValue("visibility")}function queryAll(t,e){return void 0===e&&(e=document),":focusable"===t?queryAll(FOCUSABLE,e).filter(function(t){return!t.disabled&&isVisible(t)}):"string"==typeof t?queryAll(e.querySelectorAll(t)):t.length?[].slice.call(t):t.nodeType?[t]:[]}var UUID=("data-"+name+"-"+version).replace(/\W+/g,"-"),OPEN="aria-expanded",POPS="aria-haspopup",isBool=function(t){return"boolean"==typeof t};function toggle(t,e){var n="object"==typeof e?e:{open:e},o=queryAll(t);return o.forEach(function(t){var e=isBool(n.open)?n.open:"true"===t.getAttribute(OPEN),o=isBool(n.popup)?n.popup:"true"===t.getAttribute(POPS);t.setAttribute(UUID,""),t.setAttribute(POPS,o),ariaTarget(t,"controls"),ariaExpand(t,e)}),o}addEvent(UUID,"click",function(t){var e=t.target;queryAll("["+UUID+"]").forEach(function(t){var n="true"===t.getAttribute(OPEN),o="true"===t.getAttribute(POPS);t.contains(e)?toggle(t,!n):o&&toggle(t,ariaTarget(t).contains(e))})});var name$1="@nrk/core-input",version$1="1.0.0",UUID$1=("data-"+name$1+"-"+version$1).replace(/\W+/g,"-");function input(t,e){return void 0===e&&(e={}),queryAll(t).map(function(t){var n=ariaTarget(t,"owns"),o=e.mode||t.getAttribute("aria-autocomplete")||"list";t.setAttribute(UUID$1,""),t.setAttribute("role","combobox"),t.setAttribute("autocomplete",!1),t.setAttribute("aria-autocomplete",o),n.setAttribute("role","listbox"),ariaExpand(t,e.open)})}function onShow(t){queryAll("["+UUID$1+"]").forEach(function(e){var n=ariaTarget(e);"click"===t.type&&queryAll(":focusable",n).forEach(function(n){if(n.contains(t.target))return e.focus(),e.value=n.value||n.textContent,ariaExpand(e,!1)}),ariaExpand(e,e.contains(t.target)||n.contains(t.target))})}addEvent(UUID$1,"click",onShow),addEvent(UUID$1,"focus",onShow),addEvent(UUID$1,"keydown",function(t){t.ctrlKey||t.altKey||t.metaKey}),exports.toggle=toggle,exports.input=input;
//# sourceMappingURL=core-components.cjs.js.map
